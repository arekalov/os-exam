---
number: 18
title: Архитектура и основные подсистемы Linux. Linux Kernel Map.
---
# Архитектура и основные подсистемы Linux. Linux Kernel Map

---

## Архитектура Linux по уровням (Linux Kernel Map)

Ядро Linux организовано в несколько слоёв — от непосредственного управления железом до взаимодействия с пользовательским пространством. Система функциональных уровней и подсистем отображается на схеме Linux Kernel Map следующим образом:

---

### 1. Hardware interfaces (аппаратные интерфейсы)

- **Самый нижний слой** — взаимодействие с физическим оборудованием (электроника, RAM, CPU, устройства ввода-вывода, сетевые и дисковые контроллеры).
- Здесь располагаются драйверы устройств и обработчики прерываний для:
    - user peripherals (клавиатура, мышь, аудио, графика)
    - системных шин и контроллеров (PCI, USB, SCSI, SATA)
    - памяти и процессора

---

### 2. Device control (управление устройствами)

- **Драйверы устройств**: реализуют работу с конкретным "железом" — как пользовательскими, так и системными (сетевые карты, диски, графика и т.д.).
- **Блочные драйверы**, **сетевые драйверы**, **драйверы классов HID (human interface devices)**.
- **Generic HW access** — универсальный доступ к базовым функциям оборудования.

---

### 3. Logical (логический уровень)

- **Абстракция функций и сервисов** над аппаратными драйверами.
- Примеры: логическая организация памяти (Physical Memory Operations, Page Allocator), файловых систем (Logical File Systems), подсистем Human Interface.

---

### 4. Bridges (мосты и кросс-функциональные модули)

- **Связывающие модули** для различных логических подсистем, обеспечивающие взаимодействие (например, межпроцессное взаимодействие, кросс-платформенные интерфейсы).

---

### 5. Virtual (виртуализация и расширенные функции)

- **Security** — механизмы безопасности (SELinux, контроль доступа, namespaces, cgroups).
- **Debugging** — отладка ядра, трассировка, профилирование.
- **Virtual memory** — управление виртуальной памятью, swap, mmap, vmalloc.
- **Synchronization** — поддержка атомарных операций, блокировок, семафоров.
- **Scheduler** — планирование задач между процессами и потоками.

---

### 6. User space interfaces (интерфейсы пользовательского пространства)

- **System calls and files** — интерфейсы взаимодействия с приложениями: системные вызовы, псевдофайлы `/proc`, `/sys` и виртуальные файловые системы.
- **Char devices** — интерфейсы символьных устройств (например, терминалы, последовательные порты).

---

### 7. Core system functionalities (ядро функциональных возможностей)

- **Processes & Threads** — создание, управление и синхронизация процессов и потоков.
- **Memory management** — управление памятью (выделение/освобождение, подкачка, страничная организация).
- **Interrupts and CPU** — обработка прерываний, расписание выполнения потоков, взаимодействие с процессорными ядрами.
- **File & storage management** — виртуальная файловая система (VFS), различные физические и логические файловые системы, кэш страниц, блочные устройства.
- **Networking** — сетевой стек: сокеты, протоколы (TCP/IP, UDP и др.), фильтрация и маршрутизация пакетов, сетевые интерфейсы.

---

## Сводная структура уровней ядра Linux (слева направо по Kernel Map):

1. **Human interfaces** — символьные устройства, high-level интерфейсы (например, консоль, файлы устройств).
2. **System** — работа с системными вызовами (syscalls), системные службы, интерфейсы.
3. **Processing** — процессы, потоки, планировка, синхронизация, обработчики прерываний.
4. **Memory** — управление памятью, страничная организация, кэш, отображение памяти.
5. **Storage** — файловые системы, блочные устройства, файловый кэш, swap.
6. **Networking** — сетевой стек, сокеты, семейства адресов, протоколы, сетевые драйверы.

