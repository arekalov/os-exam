---
number: 10
title: Потоки исполнения, многопоточность, модели
многопоточности.
---
## 1. Потоки исполнения (потоки, threads)

**Поток исполнения** — это наименьшая единица выполнения внутри процесса. Потоки одного процесса:
- разделяют между собой адресное пространство, данные, файлы, ресурсы процесса;
- имеют собственный стек, счетчик команд, набор регистров (контекст).

**Преимущества потоков:**
- Легковесность: переключение между потоками быстрее, чем между процессами;
- Удобен для реализации параллельных вычислений и обработки нескольких задач внутри одного приложения;
- Более эффективное использование многоядерных процессоров.

**Пример:** Веб-сервер может обрабатывать множество клиентских запросов одновременно разными потоками.

---

## 2. Многопоточность (multithreading)

**Многопоточность** — способность приложения или операционной системы запускать и исполнять несколько потоков одновременно.
- В рамках одного процесса могут работать несколько потоков, выполняющих разные задачи или разные части одной задачи.
- Многопоточность используется для увеличения производительности, асинхронных вычислений, повышения отзывчивости интерфейса и работы с многопроцессорными системами.

### Преимущества многопоточности:
- Повышение производительности за счёт параллельного выполнения;
- Улучшение взаимодействия с пользователем (например, интерфейс остается отзывчивым при выполнении фоновых операций);
- Эффективное использование ресурсов (процессора, памяти).

### Проблемы и сложности:
- Синхронизация (взаимодействие между потоками): чтобы избежать race condition (состояний гонки) и deadlock (взаимоблокировок), нужны мьютексы, семафоры и другие механизмы.
- Трудности отладки;

---

## 3. Модели многопоточности

**1. Один процесс, один поток**  
- Классическая (монопоточная) модель.
- В каждом процессе запускается лишь один поток управления.
- Все вычисления выполняются последовательно.
- Примеры: простые утилиты, небольшие скрипты.

**2. Один процесс, несколько потоков**  
- Один процесс содержит много потоков.
- Все потоки работают с общими данными, но могут параллельно выполнять разные задачи.
- Применяется для асинхронных задач, параллельных вычислений, обслуживания нескольких клиентов в одном приложении.
- Примеры: современные браузеры, серверы, научные приложения.

**3. Несколько процессов, по одному потоку в каждом процессе**  
- Запускается несколько независимых процессов, каждый из которых содержит только один поток.
- Процессы полностью изолированы друг от друга.
- Применяется для традиционной многозадачности операционной системы (например, в классическом Unix).
- Примеры: однопоточные приложения, отдельные программы в ОС.

**4. Несколько процессов, несколько потоков в каждом процессе**  
- Самая мощная и универсальная модель.
- В системе работают несколько процессов, каждый из которых содержит много потоков.
- Позволяет эффективно использовать многоядерные системы, комбинирует преимущества процессной и потоковой параллельности.
- Примеры: современные серверные и распределённые приложения, крупные научные пакеты, базы данных.
