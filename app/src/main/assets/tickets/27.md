---
number: 27
title: Функции ОС, связанные с процессами. Создание
процесса, переключение процессов.
---

## Основные функции ОС, связанные с процессами

### 1. Управление процессами

- **Создание и завершение процессов:**  
  Операционная система предоставляет механизмы для запуска новых процессов (например, через fork(), exec() в Unix) и корректного завершения (exit, kill).

- **Планирование и диспетчеризация процессов:**  
  ОС выбирает, какой процесс будет выполняться следующим, используя различные алгоритмы планирования (например, Round Robin, приоритеты).
f f
- **Переключение процессов (context switch):**  
  Смена активного процесса требует сохранения состояния текущего процесса и загрузки состояния нового, что позволяет реализовывать многозадачность.

- **Синхронизация и поддержка обмена информацией между процессами:**  
  Реализуются механизмы межпроцессного взаимодействия (IPC) — семафоры, очереди сообщений, каналы, пайпы, shared memory.

- **Организация управляющих блоков процессов:**  
  Создание, хранение и обновление PCB (Process Control Block) — главной структуры, описывающей состояние процесса.
---

## Создание процесса

Последовательность действий операционной системы при создании процесса:

1. **Присвоение уникального идентификатора**
   - ОС генерирует уникальный PID (process ID), чтобы однозначно различать процессы.

2. **Выделение памяти для процесса**
   - Операционная система резервирует необходимое адресное пространство для кода, данных, стека, кучи.

3. **Инициализация PCB (управляющего блока процесса)**
   - Формируется специальная структура с основной информацией о процессе: состояние, приоритет, указатели памяти, открытые файлы и пр.

4. **Постановка процесса в очереди ядра**
   - Новый процесс добавляется в соответствующую очередь планировщика (например, очередь готовых к выполнению процессов).

5. **Создание потоков ввода-вывода**
   - Если необходимо, создаются потоки или дескрипторы для работы с устройствами ввода-вывода.

6. **Создание других управляющих структур данных**
   - ОС формирует все необходимые служебные структуры, связанные с файлом открытых дескрипторов, учётной информацией и механизмами синхронизации.

---

## Переключение процессов (Context Switch)

**Переключение процессов** — это процесс передачи управления от одного процесса к другому, чтобы обеспечить многозадачность.

### Основные особенности:

- Процесс может работать в **пользовательском (user)** и **ядровом (kernel) режиме**.
- Для переключения процессов ОС использует механизм прерываний. Прерывания бывают нескольких видов:
    - **Внешние прерывания (I/O):**  
      Формируются, например, по завершении ввода-вывода.
    - **Ловушка (trap):**  
      Возникает при обработке ошибки или исключительной ситуации во время исполнения процесса.
    - **Вызов ОС (system call):**  
      Формируется явно программой для обращения к функциям ОС.

### Переход в kernel mode (ядро) может происходить в результате:

- **Прерывания таймера:**  
  Если процесс выполняется столько времени, чему равен квантр времени, но ос прерывает данный процесс и передает управление другому процессу.
- **Прерывание ввода-вывода:**  
  Устройство сигнализирует о завершении работы.
- **Page fault (отсутствие блока памяти):**  
  ОС обнаруживает обращение к несуществующей в памяти странице, обрабатывает подкачку.
