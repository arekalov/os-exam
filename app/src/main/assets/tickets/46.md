---
number: 46
title: Сегментно-страничная виртуальная память.
---

Суть - схема, где логическая память процесса делится на сегменты, а физическое преобразование адресов внутри сегментов делается страничным механизмом.

Логика:

- В ядре для процесса хранится список сегментов: код, данные, куча, стек, библиотеки и тп. Для каждого - начальный виртуальный адрес, длина, права, связь с файлом.
- Каждый сегмент в свою очередь разбит на страницы. Инфа о страницах (какие есть, где данные, какие кадры заняты) тоже хранится в структурах ядра и маппится на физические фреймы
- Сегментная часть: описывает логическую структуру адресного пространства процесса - какие области есть, откуда грузить их содержимое, какие у них права и какие страницы потенциально могут существовать
- Страничная часть: отвечает за физическое преобразование виртуального адреса в физический через PD\PT или инвертированные таблицы, TLB и тп. Реализуется аппаратурой MMU.

В памяти это выглядит так: виртуальная память процесса - это всего его сегменты и их страницы. В реальной памяти только резидентная часть - подмножество страниц из разных сегментов, реально находящихся в ОЗУ. Остальные страницы сегментов либо еще не загружены, либо лежат в области подкачки.

![](images/46_segments.png)