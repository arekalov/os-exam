---
number: 66
title:  Размещение записей и файлов в блоках данных. Сложность и типы организации размещения.
---

**Запись** - логическая единица доступа к структурированному файлу. **Блок** - минимальная физическая единница ввода-вывода. ОС осуществляет IO блоками, в которые сгруппированы записи. 

## Типы группировок записей:
1. Фиксированное группирование - забивание блока записями одиннаковой длины. Если запись не помещается, то переходит в следующий блок, а в предыдущим остается свободное место -> для чтения одной записи достаточно прочитать 1 блок
2. Группирование переменной длины со сцеплением - забивание блока записями переменной длины, если запись не помещается, то часть переходит в следующий блок, часть (с указателем) остается в предыдущем. Читать надо 2 блока и доступ может быть случайным -> производительность может падать
3. Группирование переменной длины без сцепления - анаолгично фиксированному, но длина записей переменная . Более чревато внутренней фрагментацией данных

![](images/66_groupings.png)

### Файл состоит из блоков, которые могут быть размещены по-разному:
* Непрерывное размещение (OC RT-11)
* Cвязанное размещение (DOS FAT)
* Bндексное размещение (UNIX UFS)

### При увеличении размера блока:
  * Увеличивается количество передаваемых записей за 1 операцию IO. Чем меньше операций IO, тем лушче
  * Увеличивает число читаемых записей при случайном доступе
  * Больше должен быть буфера ФС для промежуточного хранения данных
Повышение размера блока невозможно бесконечно, поэтому выбирает обычно оптимальное значение блока, кратно размеру страницы  

Диск реализован в виде блоков, расположенных на дорожкеъ

### Основные вопросы при организации ФС из блоков на диске:
1. Размещение - предварительное или динамическое
2. Размер **порции** (непрерывной единицы размером от блока до файла) 
3. Размер порции - фиксированный или переменный
4. Структуры данных/таблицы для учета порций файлы (FAT)


### Ответы на них влияют на характеристики (проблемы размещения):
1. Внутренняя/внешняя фрагментация
2. Частота выделения блоков для ФС
3. Время выделения блоков
4. Размер служебной информации о размещении файлов
5. Объем инфомрации, которую ФС может хранить
6. Необходимость компрессии данных при записи
