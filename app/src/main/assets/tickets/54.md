---
number: 54
title: Планирование в многопроцессорных системах. Типы многопроцессорных систем с точки зрения организации планирования. Гранулярность и проектирование планировщиков процессов и потоков для многопроцессорных систем.
---

## Типы многопроцессорных систем
* **Распределенныые/кластерные системы**:
  * Набор систем со своей основной памятью и посистемой IO
  * Распрдееление заданий между системами
  * Распредлеение общих данных и результатов
* **Функционально специализированные системы** (ASMP):
  * Ведущий процессор выполненяет коррдницию, его планировщик раздает подзадачи специализированным процессорам, которые сами по себе могут быть необщего назначения
  * Ведомые процессоры выполняют вычисления
* **Сильносвязанные процессоры** (SMP/NUMA)
  * Имеют общуюпамять и систему кэшей
  * Управляются одной ОС

### Гранулярность - частота синхронизации между процессами в системе
* **Тонкая** - параллельные вычисления на уровне отдельных машинных команд (<20) - игры например
* **Средняя** - на уровне одного приложения (20-200 команд) - обчные приложения, несколько потоков периодически обращаются к общим структурам
* **Грубая** - на уровне взаимодействующих процессов (200-2000)
* **Очень грубая** - на уровне распределенных систем (2000 - 1млк)
* **Независимая** - все процессы независимые

### Вопросы проектирования планировщиков в случаях сильно многопроцессорных систем
* Назначение процессов процессорам
  * **Статические** - процесс прибит к одному ядру все время жизки
  * **Динимическое** - общая очередь для всех процессов, распределяются на свободный проц
  * **Динамическая** балансировка нагрзуки - у каждого процессора своя очередь
* Использование многозадачности

### Подходы к планированию
*  **Load sharing** - глобальная очередь потоков, нагрузка распредляет равномерно, централизованного планировщика нет. Промахи кэшей, блокировки центральной очереди
*  **Gang scheduling** - связаанные потоки расрпделяются на связанные прцоессы по одному на процессор. Меньше накладных расходов на планирование при тонкой/средней гранулярности
*  **Dedicated process assignment** - назначает пул процессоров, равный количеству потоков. Полное устранение переключений повышает скорость работы
*  **Динамическое планирование** - в отстутсвии свободных CPU ресурсы изымаются из процесса, использ. несколько CPU