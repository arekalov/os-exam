---
number: 37
title: Примитивы синхронизации ОС. Мониторы, флаги событий, передача сообщений.
---

**Примитивы синхронизации** — это базовые механизмы, предоставляемые ОС и языками программирования для правильной организации совместного доступа к ресурсам и координации работы между процессами/потоками при параллельном выполнении.


## Предназначение примитивов синхронизации
Повзоляют избавиться от проблем параллельного выполнения:
### 1. Взаимоисключения (Mutual Exclusion)
- Ситуация, когда несколько параллельных процессов или потоков пытаются одновременно получить доступ к общему (разделяемому) ресурсу.
- Требуется механизм взаимного исключения, чтобы только один процесс/поток мог работать с этим ресурсом в данный момент времени (например, запись в файл, изменение переменной).

### 2. Взаимоблокировки (Deadlocks)
- Состояние, когда два или более процесса (потока) навечно ждут освобождения ресурсов, которые уже захвачены друг другом.
- Например: Процесс А захватил ресурс X и ждёт ресурс Y, удерживаемый процессом B, который в свою очередь ждёт освобождения ресурса X.
- Взаимоблокировка часто приводит к "заморозке" части системы.

### 3. Голодание (Starvation)
- Ситуация, когда процесс или поток длительно не может получить доступ к необходимому ресурсу из-за постоянной конкуренции с другими задачами.
- Возникает, если планировщик ресурсов отдаёт приоритет другим процессам или потокам, и "голодающий" процесс не получает своей очереди.

---

## Монитор (Monitor)
Монитор — высокоуровневая конструкция синхронизации, объединяющая:
- данные (переменные, структура),
- взаимное исключение (обычно через встроенный мьютекс),
- условные переменные (`wait`, `notify`).

**Принцип работы**: в один момент времени код монитора может выполнять только один поток. Остальные ждущие входят внутрь, когда монитор освобождается.

---
## Флаг события

Флаг события — примитив синхронизации, который позволяет одному потоку "подать сигнал" другим о наступлении какого-либо события.

- Может быть как одиночным, так и набором флагов (битовая маска).
- Потоки ожидают (wait), пока флаг не будет установлен, и продолжают работу после его установки.

Применение:
Ожидание завершения работы другого потока/процесса.
Сигнализация о готовности ресурса.

---

Message passing — примитив синхронизации и межпроцессного взаимодействия, при котором потоки или процессы обмениваются сообщениями через ОС или специальную очередь.

- Две операции: send (отправить сообщение), receive (принять сообщение).
- Может быть синхронным (отправитель ждёт получения сообщения) или асинхронным (отправитель сразу продолжает работу).
- Бывают с прямой и косвенной адрессацией.
- Актуально для обмена между процессами без общей памяти.