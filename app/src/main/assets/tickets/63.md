---
number: 63
title:  Файловый ввод-вывод, основные определения. Задачи ОС по управлению файлами. Совместное использование файлов.
---


## Определение файла
**Файл** - коллекция данных, обладающая свойствами:
  * Наличие структура (простая с похожими записями, иерархическая или более сложная, возможны несколько в 1 файле)
  * Возможность долгосрочного существования - хранится на диске и не исчезает при выходе пользователя из системы
  * возможность совместного использования процессами - файлы имеют имена и права, обеспечивающие управляемый совместный доступ


## Структура и части файлов
  * **Поле** - одиночный элемент записи, обычно одно значение или набор значений, характеризуется длиной и типом данных
  * **Запись** - набор связанных между собой полей, длина полей и/или их кол-во может быть переменным (С - структура)
  * **Файл** - именованный набор однородных (логически взаимосвязанных) записей (или полей)
  * **База данных** - файл со сложной взаимозависимой структурой  полей и записей
  * Операции над файлом могут влиять на его структуру
  * Файл может не иметь структуры (например, представлять поток байт)
  

## Подсистема управления файлами и задачи ОС 
**Подсистема управления файлами** - часть ОС, позволяющая хранить файлы и проводить над ними операции:
  * Возможность хранить файлы и выполнять пользователю над ними операции:
    * создание, удаление, чтение и изменения файлов
    * Управление доступом - создатель назначается владельцем и может задавать права на использование файла
    * перемещение данных между файлами
    * Обеспечение возможности работы с файлами по удобным для пользователя именам
    * Резервное копирование и восстановление - обычно не часть ФС, а реализуется в отделььном приложении, где пользователь может выбрать место и время б
  * Гарантия корректности данных - содержимое файла не должно меняться во времени (для важных файлов делают контрольные копии и считают контрольные суммы)
  * Приемлемая производительность - вторичная память очень медленная, поэтому для работы с файлами применяется буферизация, RAID и прочее
  * Различные типы устройств хранения - флешки, дискеты и т.д. -> нужны драйвера
  * Минимизация потерь и повреждения данных - обеспечение целостности данных при сбоях процессов и ОС
  * Обеспечение базового набора функций IO - ядро должно предоставлять syscalls для IO, на которых работают более высокоуровневые инструменты
  * Обеспечение совместного использования файлов - файлы не должны меняться потоками/процессами одновременно, поэтому используют блокироваки разного уровня