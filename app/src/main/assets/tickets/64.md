---
number: 64
title:  Управление файлами в UNIX SVR4
---


## Схема управления файлами UNIX SVR4
В ядре есть **подсистема логического IO**, у которой есть части, отвечащие за управление катлогами и файловые операции. Она отвечает за переход в каталог, открытие файла по имени, чтение, запись и т.д. Уроверь супервизора IO стандартизирует интерфейс взаимодействия (виртуальную ФС) внутри всех ФС (объектно-ориентированныый подход), содержащий виртуальные узлы, относящеся к конкретным используемым ФС. **Base File System** зависит от драйверов устройств и физического расположения блоков на диске
В структуре PCB есть user_t, содержащая информацию пользователе, в том числе u_finfo->fi_list - список значений десскрипторов открытых процессом файлов и стандратных потоков IO (file_t). Они указывают на виртуальные узлы, под которыми идут конкретные реализации для конкретных ФС (snode, inode)

![](images/64_file_management.png)

На x86 в начале диска расположены MBR (Master Boot Record) и таблца разделов дисков, содержащих некоторое кол-во томов логических записей (последовательстей блоков, выделенный на диске для ФС), каждый из которых содержит:
* Boot block - загрузчик ОС
* Суперблок - геометрия разделов, кол-во разделов, бэкапы и служебные параметры ФС 
* Цилиндровые группы - последовательно расположенные сектора равного размера, содержащие копии суперблока для восстановления ФС при сбоях диска, описание ЦГ, информкацию о свободных блоках, массив inode и блоки данных. Таким образом, файлы и их данные хранятся локально -> головка диска меньше двигается ->  повышается производительность ФС 

Написать пример ФС из 69 билета 