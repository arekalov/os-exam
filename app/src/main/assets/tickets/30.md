---
number: 30
title: Состояния потока, User Level Threads vs Kernel Level Threads
---

## Состояния потока

Поток выполнения (thread) в любое время может находиться в одном из следующих основных состояний:

1. **New (Создан)**
   - Поток только что создан, но ещё не запущен.

2. **Runnable (Готов к запуску)**
   - Поток готов к выполнению и ожидает выделения процессора.

3. **Running (Выполняется)**
   - Поток в данный момент работает на процессоре.

4. **Blocked (Заблокирован/Ожидание)**
   - Поток ожидает наступления какого-то события (например, завершения ввода-вывода, освобождения ресурса).

5. **Terminated (Завершён)**
   - Поток завершил выполнение и его ресурсы освобождаются.

![](images/30_threads_lf.png)


---

## User Level Threads (Потоки на уровне пользователя)

**Определение**  
User Level Threads (ULT) — потоки, управление которыми осуществляется в пространстве пользователя, без участия ядра ОС.

**Особенности:**
- Планирование потоков и их переключение реализуется в пользовательской библиотеке (например, POSIX Threads).
- Ядро не «видит» отдельных потоков, оно работает только с одним процессом.
- Все потоки одного процесса отображаются на один kernel thread (один поток ядра).

**Преимущества:**
- Очень быстрое создание, уничтожение и переключение потоков (не требуется обращение к ядру).
- Можно реализовать свои собственные политики планирования потоков.

**Недостатки:**
- Если один поток блокируется (например, на системе ввода-вывода), блокируется весь процесс.
- Нет параллельного выполнения потоков на многоядерных процессорах, так как ОС планирует только процессы, а не потоки внутри них.

---

## Kernel Level Threads (Потоки на уровне ядра)

**Определение**  
Kernel Level Threads (KLT) — потоки, которыми напрямую управляет ядро операционной системы.

**Особенности:**
- Создание, завершение, планирование и переключение потоков осуществляются ядром.
- Ядро «видит» каждый поток и может выделять им процессорное время независимо.
- Каждый поток пользовательского уровня отображается на отдельный kernel thread.

**Преимущества:**
- Если один поток блокируется, остальные потоки того же процесса продолжают выполняться.
- Возможна реальная параллельная работа потоков на многоядерных CPU.

**Недостатки:**
- Переключение между потоками дороже по ресурсам, так как требует перехода в режим ядра.
- Зависимость от реализации поддерживающей ОС.
