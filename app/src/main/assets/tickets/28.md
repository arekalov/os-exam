---
number: 28
title: Процессы в ОС UNIX SVR4. Диаграмма состояний, основные структуры.
---


## Диаграмма состояний процесса в UNIX SVR4

Процесс может находиться в следующих основных состояниях:

В UNIX SVR4 процесс проходит множество состояний, отражающих как его жизненный цикл, так и особенности управления памятью и обработкой событий ОС. Вот ключевые состояния, встречающиеся в классической реализации:

### 1. Выполняющийся пользовательский (User Running)
- Процесс сейчас выполняется в пользовательском режиме (user mode).

### 2. Выполняющийся ядра (Kernel Running)
- Процесс исполняется в режиме ядра (kernel mode), например, при обработке системного вызова или прерывания.

### 3. Готовый к выполнению, загруженный (Ready, loaded)
- Процесс находится в оперативной памяти и готов приступить к выполнению при выделении ему процессорного времени.

### 4. Спящий, загруженный (Sleeping, loaded)
- Процесс находится в памяти, но ожидает какого-то события (например, завершения ввода-вывода). Это заблокированное состояние (blocked), но память ещё не выгружена.

### 5. Готовый к выполнению, выгруженный (Ready, swapped out)
- Процесс готов к работе, но параметры процесса и его память выгружены (swapped) на диск. Чтобы начать выполнение, ОС должна сначала вернуть процесс в память.

### 6. Спящий, выгруженный (Sleeping, swapped out)
- Процесс в состоянии ожидания события (blocked), и его память также выгружена на диск.

### 7. Вытесненный (Preempted)
- Промежуточное состояние, когда процесс был вытеснен с процессора (например, истёк квант времени или пришло прерывание), и ядро решает, какой процесс использовать следующий.

### 8. Созданный (Created)
- Процесс только что создан (после fork), но ещё не готов к выполнению (например, не инициализирован, не допущен до очереди планирования).

### 9. Зомби (Zombie)
- Сам процесс уже не существует (выполнение завершено), но запись о нём остаётся в системе для передачи информации родительскому процессу (ожидание завершения — wait()).

![](images/28_nine_states.png)
---

## Основные управляющие структуры процесса в SVR4

![](images/28_proc_structure.png)

- **proc_t** — основная структура процесса: хранит PID, состояние, ссылки на все связанные структуры.
- **user_t** — пользовательский контекст процесса, данные пользователя и среды.
- **kthread_t** — ядровой поток (kernel thread), единица планирования внутри процесса.
- **klwp_t** — легковесный поток (Light Weight Process, LWP); связывает поток пользователя с ядровым потоком.
- **tsproc_t** — структура для поддержки политики планирования (например, time sharing) и отслеживания времени.
- **as, seg, segvn_data** — структуры организации адресного пространства и сегментов памяти процесса.